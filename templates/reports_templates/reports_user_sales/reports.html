{% extends "base_admin.html" %}
{% load static %}
{% load user_tags %} 
{% block title %} Reporte de ventas{% endblock %}
{% block contend %}
<form class="row g-3 pt-2 pb-4"
      method="GET"
      id="OrderFilters"
      hx-get="{% url 'order_users_table_results' %}"
      hx-target="#ReportsSalesResults"
      hx-swap="innerHTML"
      hx-trigger="submit"
      hx-indicator="#spinnerOrderFilter,#spinner">
      {% if request.user|has_group:"administrador"%}
      <div class="col-6 col-sm-4 col-md-4 col-lg-3">
        <label for="inputOrderUserFilter" class="form-label">Usuario</label>
        <select id="inputOrderUserFilter" name="user" class="form-select" aria-label="Default select example">
          <option value="" selected>Seleccionar usuario</option>
          {% for user in users %}
          <option value="{{user.id}}">{{user.username}}</option>
          {% endfor %}
        </select>
      </div>
      {% endif %}
      <div class="col-6  col-sm-4 col-md-4 col-lg-3">
        <label for="inputOrderLocalFilter" class="form-label">Instalación</label>
        <select id="inputOrderLocalFilter" name="local" class="form-select" aria-label="Default select example">
          <option value="" selected>Seleccionar instalación</option>
          {% for local in locals %}
          <option value="{{local.id}}">{{local.name}}</option>
          {% endfor %}
        </select>
      </div>
      
        <div class="col-6 col-sm-4 col-md-4 col-lg-3">
          <label for="inputOrderCreateDate1Filter" class="form-label">Fecha inicio</label>
          <input type="date" name="created_at_after" class="form-control" id="inputOrderCreateDate1Filter" placeholder="Create date 1">
        </div>
        <div class="col-6 col-sm-4 col-md-4 col-lg-3">
          <label for="inputOrderCreateDate2Filter" class="form-label">Fecha final</label>
          <input type="date" name="created_at_before" class="form-control" id="inputOrderCreateDate2Filter" placeholder="Create date 2">
        </div>
<div class="col-12">
  <small class=" w-100 d-flex justify-content-end mt-3">
      <button type="submit" class="btn d-flex justify-content-center align-items-center btn-outline-primary shadow-sm border-2 border-primary px-5">
        <span id="spinnerOrderFilter" class="htmx-indicator spinner-border spinner-border-sm me-2" ></span>Filtrar</button>
  </small>
</div>
</form>

<div 
hx-get="{% url 'order_users_table_results' %}"
hx-target="#ReportsSalesResults"
hx-trigger="load"
hx-swap="innerHTML"
hx-indicator="#spinner"></div>

<div class="w-100 position-relative d-flex justify-content-center align-items-center">
<div id="spinner" class="htmx-indicator w-100 h-100  loadding-blur position-absolute z-10 d-flex justify-content-center align-items-center">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
<div class="w-100" id="ReportsSalesResults">
  
</div> 
</div>

{% endblock contend %}

